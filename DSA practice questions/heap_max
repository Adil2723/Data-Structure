#include <iostream>
using namespace std;

class MaxHeap {
public:
    int arr[100];  // fixed-size array
    int size;

    MaxHeap() {
        size = 0;
    }

    // Heapify Up (for insert)
    void heapifyUp(int i) {
        while (i > 0 && arr[(i - 1) / 2] < arr[i]) {
            swap(arr[i], arr[(i - 1) / 2]);
            i = (i - 1) / 2;
        }
    }

    // Heapify Down (for delete and heap sort)
    void heapifyDown(int i) {
        while (true) {
            int l = 2 * i + 1;
            int r = 2 * i + 2;
            int largest = i;

            if (l < size && arr[l] > arr[largest]) largest = l;
            if (r < size && arr[r] > arr[largest]) largest = r;

            if (largest == i) break;

            swap(arr[i], arr[largest]);
            i = largest;
        }
    }

    // Insert a value
    void insert(int x) {
        arr[size] = x;
        size++;
        heapifyUp(size - 1);
    }

    // Delete value at index i
    void deleteIndex(int i) {
        if (i >= size) return;
        arr[i] = arr[size - 1];
        size--;
        heapifyUp(i);
        heapifyDown(i);
    }

    // Heap Sort
    void heapSort() {
        int tempSize = size;
        for (int i = size - 1; i > 0; i--) {
            swap(arr[0], arr[i]);
            size--;
            heapifyDown(0);
        }
        size = tempSize;
    }

    // Print Heap / Array
    void printHeap() {
        for (int i = 0; i < size; i++)
            cout << arr[i] << " ";
        cout << endl;
    }
};

int main() {
    MaxHeap h;

    // Insert values
    h.insert(8);
    h.insert(7);
    h.insert(6);
    h.insert(5);
    h.insert(4);
    h.insert(10);

    cout << "Heap: ";
    h.printHeap();

    // Delete index 2
    h.deleteIndex(2);
    cout << "After deleting index 2: ";
    h.printHeap();

    // Heap Sort
    h.heapSort();
    cout << "Heap sorted: ";
    h.printHeap();

    return 0;
}
